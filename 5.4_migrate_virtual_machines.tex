\subsection{Migrate Virtual Machines}

vMotion is moving running VMs from one machine to another. The VM's disk files
stay where they are on shared storage.

Uses for vmotion:

\begin{itemize}
\item balance the load on ESXi servers (DRS)
\item save power by shutting down ESXi (DPM)
\item patching and maintenance on ESXi servers (update manager, hardware
maintenance)
\end{itemize}

New vMotion features in vSphere 5:

\begin{itemize}

\item multi-nic vmotion support, vmotion will use up to 16 1G nics or up to 4
10G nics nics for better performance

\item stun during page send, tells vCPUs of server to slow down to give
vMotion a chance to move a high-performance virtual machine

\end{itemize}

Any time a virtual machine is attached to a physical device on an ESX Host
the virtual machine cannot be vMotioned.

\subsubsection{Identify ESXi host and virtual machines requirements for vMotion and Storage vMotion}

\begin{itemize}
\item vSphere Essentials Plus, Standard, Enterprise or Enterprise Plus license
\item shared storage between ESXi servers (iSCSI, FC, NFS)
\item a vmkernel interface on both ESXi servers with vMotion enabled
\item CPU compatibility, or family compatibility if using EVC on the cluster
\end{itemize}

storage vMotion of a large VM can take a long time depending on the network
connection.\\

To move both host and datastore of a VM it must be powered off.

\subsubsection{Identify Enhanced vMotion Compatibility CPU requirements}

\subsubsection{Identify snapshot requirements for vMotion/Storage vMotion migration}

vSphere 5 supports Storage vMotion of virtual machines with snapshots.

\subsubsection{Migrate virtual machines using vMotion/Storage vMotion}

\subsubsection{Configure virtual machine swap file location}

\subsubsection{Migrate a powered-off or suspended virtual machine}

\subsubsection{Utilize Storage vMotion techniques (changing virtual disk type, renaming virtual machines, etc.)}

Storage vMotion moves the storage of a running VM from one datastore to
another. The VM stays on same host and the memory never moves.\\

Use cases for storage vMotion:

\begin{itemize}
\item balance datastore utilization for space and performance
\item perform SAN maintenance or swap out
\end{itemize}

You can use storage vMotion to transform virtual disks from one format to
another (between thin and thick). FT is a use case for changing from thin to
thick because it requires thick.
